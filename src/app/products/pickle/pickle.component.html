<!-- Product List Section with Blur Effect -->
<section class="items" [class.blurred]="selectedProduct">
  <div *ngIf="successMessageVisible" class="success-popup">
    <p>Item added successfully!</p>
  </div>
    <div *ngFor="let product of products" class="item">
      <div class="offer-label">
        <span class="offer-text">25% OFF</span>
      </div>
      <img [src]="product.image" alt="{{ product.name }}">
      <h4>{{ product.name }}</h4>
      <p class="compact">Wt: {{ product.weight }}</p>
  
      <!-- Dynamic Rating display -->
      <p class="compact">Rating:
        <span *ngFor="let star of [].constructor(product.rating); let i = index">★</span>
        <span *ngFor="let star of [].constructor(5 - product.rating); let i = index">☆</span>
      </p>
  
      <!-- Price with discount -->
      <p class="compact">
        Price:
        <span *ngIf="calculateDiscount(parsePrice(product.price)) > 0">
          ${{ getDiscountedPrice(parsePrice(product.price), calculateDiscount(parsePrice(product.price))) | number:'1.2-2' }}
        </span>
        <span *ngIf="calculateDiscount(parsePrice(product.price)) === 0">
          ${{ parsePrice(product.price) | number:'1.2-2' }}
        </span>
      </p>
  
      <!-- Action Buttons -->
      <div class="button-group">
        <!-- Add To Cart Button -->
        <button class="btn btn-primary" (click)="addToCart(product)">Add To Cart</button>
        <button class="btn btn-primary" (click)="openDetails(product)">Order</button>
      </div>
    </div>
  </section>
  
  <!-- Overlay for Blur Effect -->
  <div *ngIf="selectedProduct" class="overlay" (click)="closePriceDetails()"></div>
  
  <!-- Popup Content Section -->
  <div *ngIf="selectedProduct" class="details-section">
    <button class="btn-close" (click)="closePriceDetails()">×</button>
  
    <!-- Exchange and Price Details -->
    <div class="price-details">
      <h4>With Exchange</h4>
      <p>Up to <strong>₹70.00 off</strong></p>
      <h4>Without Exchange</h4>
      <p><strong>₹670</strong> <span class="discounted-price">₹490.00</span></p>
    </div>
  
    <!-- Shipping and Delivery Info -->
    <div class="shipping-info">
      <p><strong>Fulfilled</strong><br>FREE scheduled delivery as soon as 4 Days from Now.</p>
      <p>Delivering to Bhopal 462030 - <a href="#">Update location</a></p>
      <p>In stock</p>
    </div>
  
    <!-- Payment Info -->
    <div class="payment-info">
      <p><strong>Payment</strong><br>Secure transaction. Your information is encrypted during transmission.</p>
    </div>
  
    <!-- Quantity Selection -->
    <div class="quantity-container">
      <button class="quantity-button" (click)="decreaseQuantity()">-</button>
      <input type="number" [(ngModel)]="quantity" class="quantity-input" [min]="1" [max]="maxQuantity" (input)="onQuantityChange()" />
      <button class="quantity-button" (click)="increaseQuantity()">+</button>
    </div>
  
    <!-- Total Price -->
    <div class="total-price">
      <p><strong>Total: </strong>₹{{ quantity * 490 }}</p>
    </div>
  
    <!-- Checkout Button -->
    <button class="btn-go-to-checkout" (click)="goToCheckout()" routerLink="/check-out">Proceed to Checkout</button>
  </div>
  


    <section class="items">        
      <div *ngIf="successMessageVisible" class="success-popup">
        <p>Item added successfully!</p>
      </div>     
    <!-- src/app/products/product/product.component.html -->

    <div *ngFor="let product of products" class="item">
    <img [src]="product.image" alt="{{ product.name }}">

    <h4>{{ product.name }}</h4>
    <p class="compact">Wt: {{ product.weight }}</p>

    <!-- Rating display -->
    <p class="compact">Rating: 
    <span *ngFor="let star of [].constructor(product.rating); let i = index">
        ★
    </span>
    <span *ngFor="let star of [].constructor(5 - product.rating); let i = index">
        ☆
    </span>
    </p>

    <!-- Calculate and show the discount based on price -->
    <p class="compact">Discount: {{ calculateDiscount(parsePrice(product.price)) }}%</p>

    <!-- Calculate and display the price after discount -->
    <p class="compact">
    Price: 
    <span *ngIf="calculateDiscount(parsePrice(product.price)) > 0">
        ${{ getDiscountedPrice(parsePrice(product.price), calculateDiscount(parsePrice(product.price))) | number:'1.2-2' }}
    </span>
    <span *ngIf="calculateDiscount(parsePrice(product.price)) === 0">
        ${{ parsePrice(product.price) | number:'1.2-2' }}
    </span>
    </p>

    <!-- Action Buttons -->
    <div class="button-group">
      <!-- Add To Cart Button -->
      <button class="btn btn-primary" (click)="addToCart(product)">Add To Cart</button>
      <button class="btn btn-primary" (click)="openDetails(product)">Order</button>
    </div>
    </div>
  </section>
  
  <!-- Overlay for Blur Effect -->
  <div *ngIf="selectedProduct" class="overlay" (click)="closePriceDetails()"></div>
  
  <!-- Popup Content Section -->
  <div *ngIf="selectedProduct" class="details-section">
    <button class="btn-close" (click)="closePriceDetails()">×</button>
  
    <!-- Exchange and Price Details -->
    <div class="price-details">
      <h4>With Exchange</h4>
      <p>Up to <strong>₹70.00 off</strong></p>
      <h4>Without Exchange</h4>
      <p><strong>₹670</strong> <span class="discounted-price">₹490.00</span></p>
    </div>
  
    <!-- Shipping and Delivery Info -->
    <div class="shipping-info">
      <p><strong>Fulfilled</strong><br>FREE scheduled delivery as soon as 4 Days from Now.</p>
      <p>Delivering to Bhopal 462030 - <a href="#">Update location</a></p>
      <p>In stock</p>
    </div>
  
    <!-- Payment Info -->
    <div class="payment-info">
      <p><strong>Payment</strong><br>Secure transaction. Your information is encrypted during transmission.</p>
    </div>
  
    <!-- Quantity Selection -->
    <div class="quantity-container">
      <button class="quantity-button" (click)="decreaseQuantity()">-</button>
      <input type="number" [(ngModel)]="quantity" class="quantity-input" [min]="1" [max]="maxQuantity" (input)="onQuantityChange()" />
      <button class="quantity-button" (click)="increaseQuantity()">+</button>
    </div>
  
    <!-- Total Price -->
    <div class="total-price">
      <p><strong>Total: </strong>₹{{ quantity * 490 }}</p>
    </div>
  
    <!-- Checkout Button -->
    <button class="btn-go-to-checkout" (click)="goToCheckout()" routerLink="/check-out">Proceed to Checkout</button>
  </div>


  <section class="items">
    <div *ngIf="successMessageVisible" class="success-popup">
      <p>Item added successfully!</p>
    </div>
    <div *ngFor="let product of products" class="item">
      <div class="offer-label">
        <span class="offer-text">{{ product.discount }} OFF</span>
      </div>
      <img [src]="product.image" alt="{{ product.name }}" class="item-image">
      <h4 class="item-name">{{ product.name }}</h4>
      <p class="compact">Wt: {{ product.weight }}</p>
      <p class="compact">Rating: {{ product.rating }}</p>
      <p class="compact price">Price: {{ product.price | currency }}</p>
      <div class="button-group">
        <!-- Add To Cart Button -->
        <button class="btn btn-primary" (click)="addToCart(product)">Add To Cart</button>
        <button class="btn btn-secondary" (click)="openDetails(product)">Order</button>
      </div>
    </div>
  </section>
  

 
  <section class="items">
    <div *ngIf="successMessageVisible" class="success-popup">
      <p>Item added successfully!</p>
    </div>
    <div *ngFor="let product of products" class="item">
      <div class="offer-label">
        <span class="offer-text">{{ product.discount }} OFF</span>
      </div>
      <img [src]="product.image" alt="{{ product.name }}" class="item-image">
      <h4 class="item-name">{{ product.name }}</h4>
      <p class="compact">Wt: {{ product.weight }}</p>
      <p class="compact">Rating: {{ product.rating }}</p>
      <p class="compact price">Price: {{ product.price | currency }}</p>
      <div class="button-group">
        <button class="btn btn-primary" (click)="addToCart(product)">Add To Cart</button>
        <button class="btn btn-primary" (click)="openDetails(product)">Order</button>
      </div>
    </div>
  </section>
  
        
        
  <section class="items">
    <div *ngIf="successMessageVisible" class="success-popup">
      <p>Item added successfully!</p>
    </div>
    <div *ngFor="let product of products" class="item">
      <div class="offer-label">
        <span class="offer-text">{{ product.discount }} OFF</span>
      </div>
      <img [src]="product.image" alt="{{ product.name }}" class="item-image">
      <h4 class="item-name">{{ product.name }}</h4>
      <p class="compact">Wt: {{ product.weight }}</p>
      <p class="compact">Rating: {{ product.rating }}</p>
      <p class="compact price">Price: {{ product.price | currency }}</p>
      <div class="button-group">
        <button class="btn btn-primary" (click)="addToCart(product)">Add To Cart</button>
        <button class="btn btn-primary" (click)="openDetails(product)">Order</button>
      </div>
    </div>
  </section>
             
                
                

  <section class="items">
    <div *ngIf="successMessageVisible" class="success-popup">
      <p>Item added successfully!</p>
    </div>
    <div *ngFor="let product of products" class="item">
      <div class="offer-label">
        <span class="offer-text">{{ product.discount }} OFF</span>
      </div>
      <img [src]="product.image" alt="{{ product.name }}" class="item-image">
      <h4>{{ product.name }}</h4>
      <p class="compact">Wt: {{ product.weight }}</p>
      <p class="compact">Rating: {{ product.rating }}</p>
      <p class="compact price">Price: {{ product.price | currency }}</p>
      <div class="button-group">
        <button class="btn btn-primary" (click)="addToCart(product)">Add To Cart</button>
        <button class="btn btn-primary" (click)="openDetails(product)">Order</button>
      </div>
    </div>
  </section>
  
                                
                              